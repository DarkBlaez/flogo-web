<div class="head">
  <h2 class="title">{{ 'TASKS:ADD-ACTIVITY' | translate }}</h2>
  <input
    cdkFocusRegionStart
    type="text"
    class="search"
    placeholder="{{ 'ADD:SEARCH-ACTIVITIES' | translate }}"
    (keyup)="filterActivities($event.target.value)"
  />
  <span class="flogo-icon-search icon-search"></span>
</div>
<div class="content" *ngIf="(filteredActivities$ | async) as activities">
  <button
    class="list-item install-item qa-install-item"
    (click)="handleInstallerWindow(true)"
  >
    <div class="install-activity">
      <i class="install-icon flogo-icon-add"></i>
      <span>{{ 'FLOWS-DETAILS-TASKS:INSTALL-NEW-ACTIVITY' | translate }}</span>
    </div>
  </button>
  <div
    #activityList
    *ngIf="activities.length > 0; else emptyCase"
    role="listbox"
    class="activities-list"
    tabindex="0"
    (focus)="onFocusList()"
    (keydown)="listKeyDown($event)"
  >
    <flogo-flow-task-add-activity
      *ngFor="let activity of activities"
      role="option"
      class="list-item qa-activities"
      [activity]="activity"
      (selected)="selectActivity(activity.ref)"
    >
    </flogo-flow-task-add-activity>
  </div>
  <ng-template #emptyCase>
    <p class="empty-text qa-no-tasks">{{ 'ADD:NO-TASKS' | translate }}</p>
  </ng-template>
  <input type="hidden" cdkFocusRegionEnd />
</div>
<flogo-flow-sub-flow
  *ngIf="isSubflowOpen"
  [appId]="(control.appAndFlowInfo$ | async).appId"
  [currentFlow]="(control.appAndFlowInfo$ | async).actionId"
  (flowSelected)="handleFlowSelection($event)"
></flogo-flow-sub-flow>
