<div [formGroup]="paramGroup" class="form-input">
  <div class="form-input-wrapper">
    <input
      class="form-input__name"
      type="text"
      formControlName="name"
      placeholder="parameter name"
      [ngClass]="{ '--invalid': !paramGroup.get('name').valid }"
      (blur)="updateGroupByParam()"
    />
    <div class="dropdown form-input__type type-selector">
      <button
        class="btn btn-default dropdown-toggle type-selector__label"
        type="button"
        data-toggle="dropdown"
        aria-haspopup="true"
        aria-expanded="true"
      >
        <span>{{ paramGroup.get('type').value | lowercase }}</span>
        <input type="hidden" formControlName="type" />
        <!--  <span class="carext list-caret type-selector__caret"></span> -->
        <svg
          class="type-selector__caret"
          width="24px"
          height="24px"
          viewBox="0 0 24 24"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
        >
          <defs></defs>
          <g
            id="System-icons"
            stroke="none"
            stroke-width="1"
            fill="none"
            fill-rule="evenodd"
          >
            <g id="system-icon/dropdown" fill="#79b8dc">
              <g id="Group" transform="translate(6.000000, 10.000000)">
                <path
                  d="M6.0123,6.8601 L0.1755,1.0239 C-0.0585,0.7899 -0.0585,0.4101 0.1755,0.1755 C0.4101,-0.0585 0.7899,-0.0585 1.0245,0.1755 L6.0123,5.1633 L10.9755,0.1995 C11.2101,-0.0345 11.5899,-0.0345 11.8245,0.1995 C12.0585,0.4341 12.0585,0.8139 11.8245,1.0479 L6.0123,6.8601 Z"
                  id="ic-dropdown"
                ></path>
              </g>
            </g>
          </g>
        </svg>
      </button>
      <ul class="dropdown-menu type-selector__dropdown-menu">
        <li
          *ngFor="let option of dropdownOptions"
          class="list-label"
          (click)="selectType(option)"
        >
          <a>{{ option }}</a>
        </li>
      </ul>
    </div>
  </div>

  <div
    class="group-by-section"
    [ngClass]="{ 'group-by-section--selected': selectedAsGroupBy }"
  >
    <button
      class="btn btn-default dropdown-toggle group-by-section__btn"
      [ngClass]="{
        'group-by-section__btn--disable': paramGroup.get('name').value === ''
      }"
      type="button"
      data-toggle="dropdown"
      aria-haspopup="true"
      aria-expanded="true"
      (click)="selectGroupBy()"
    >
      <svg
        class="group-by-section__icon"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 24 24"
      >
        <path
          fill="currentColor"
          d="M21.582 7.472L10.629 18.576a1.414 1.414 0 0 1-2.02 0L2.418 12.3A1.458 1.458 0 0 1 2 11.276c0-.8.64-1.448 1.429-1.448.393 0 .751.162 1.01.424l5.18 5.252 9.942-10.08A1.417 1.417 0 0 1 20.571 5 1.44 1.44 0 0 1 22 6.448c0 .4-.16.762-.418 1.024"
        />
      </svg>
      <span *ngIf="showGroupByBtn; else changeGroupBy">Group by</span>
      <ng-template #changeGroupBy>
        <span>Change group by</span>
      </ng-template>
    </button>

    <div class="form-input__delete">
      <i class="flogo-icon-delete delete-icon" (click)="onRemoveParam()"></i>
    </div>
  </div>
</div>
