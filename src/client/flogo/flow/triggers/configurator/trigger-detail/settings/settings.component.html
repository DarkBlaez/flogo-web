<div [formGroup]="settingsForm" class="settings-form" *loadMonacoEditor>
  <div class="settings-group">
    <div class="settings-group__content settings-block settings-block__name">
      <input type="text" id="triggerName"
             [class.--isValid]="settingsForm.controls.name.value !== ''"
             [formControl]="settingsForm.controls.name">
      <label class="settings-label" for="triggerName">{{"TRIGGER-CONFIGURATOR:SETTINGS:NAME" | translate}}</label>
    </div>
    <flogo-triggers-configuration-settings-help
      [trigger]="triggerInformation?.trigger"></flogo-triggers-configuration-settings-help>
  </div>
  <div class="settings-block">
    <label class="settings-label" for="triggerDescription">{{"TRIGGER-CONFIGURATOR:SETTINGS:DESCRIPTION" | translate}}</label>
    <textarea id="triggerDescription" class="settings-field settings-field__description"
              [formControl]="settingsForm.controls.description"></textarea>
  </div>
  <div class="settings-group">
    <div *ngIf="triggerSettings" class="settings-group__content"
         [formGroup]="settingsForm.controls.triggerSettings">
      <div class="settings-group__header">
        <i class="flogo-icon-settings settings-group__icon"></i>
        {{"TRIGGER-CONFIGURATOR:SETTINGS:TRIGGER-SETTINGS" | translate}}
      </div>
      <div class="settings-block" *ngFor="let settingName of triggerSettings">
        <label class="settings-label">{{settingName}}</label>
        <ng-container [ngSwitch]="triggerInformation?.settingsControls.triggerSettings[settingName].type">
          <monaco-editor *ngSwitchCase="VALUE_TYPES.Any"
                         [formValueChangeTransformerFn]="editorOut(triggerInformation?.settingsControls.triggerSettings[settingName].type)"
                         [formValueWriteTransformerFn]="editorIn"
                         [formControl]="settingsForm.controls.triggerSettings.controls[settingName]">
          </monaco-editor>
          <input *ngSwitchDefault class="settings-field"
                 fgTriggersConfigAutoComplete
                 [fgTriggerSettingsField]="triggerInformation.settingsControls.triggerSettings[settingName].type"
                 [formControl]="settingsForm.controls.triggerSettings.controls[settingName]"
                 [autoCompleteVariablesSource]="triggerInformation?.settingsControls.triggerSettings[settingName].propsAllowed"
                 [autoCompleteAllowedSource]="triggerInformation?.settingsControls.triggerSettings[settingName].allowed">
        </ng-container>
        <span *ngIf="settingsForm.controls.triggerSettings.controls[settingName]?.errors; let errors">
          {{ errors | json }}
        </span>
      </div>
    </div>
    <div *ngIf="handlerSettings" class="settings-group__content"
         [formGroup]="settingsForm.controls.handlerSettings">
      <div class="settings-group__header">
        <i class="flogo-icon-settings settings-group__icon"></i>
        {{"TRIGGER-CONFIGURATOR:SETTINGS:HANDLER-SETTINGS" | translate}}
      </div>
      <div class="settings-block" *ngFor="let settingName of handlerSettings">
        <label class="settings-label">{{settingName}}</label>
        <input class="settings-field" fgTriggersConfigAutoComplete
               [fgTriggerSettingsField]="triggerInformation.settingsControls.handlerSettings[settingName].type"
               [formControl]="settingsForm.controls.handlerSettings.controls[settingName]"
               [autoCompleteVariablesSource]="triggerInformation?.settingsControls.handlerSettings[settingName].propsAllowed"
               [autoCompleteAllowedSource]="triggerInformation?.settingsControls.handlerSettings[settingName].allowed">
        <span *ngIf="settingsForm.controls.handlerSettings.controls[settingName]?.errors; let errors">
          {{ errors | json }}
        </span>
      </div>
    </div>
  </div>
</div>
