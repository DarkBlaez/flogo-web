<div class="flogo-app-header row">
  <div class="col-xs-6 col-md-5 col-lg-4 col-md-offset-1">
    <div class="flogo-app-header__name-container flogo-input-error">
      <span class="flogo-input-error-msg">That app name already exist. Pick a unique name.</span>
      <input *ngIf="editingName" type="text" #appInputName
             autofocus
             [(ngModel)]="application.name"
             (ngModelChange)="onInputNameChange($event)"
             (blur)="onInputNameBlur($event)"
             (keyup)="onKeyUpName($event)"
             id="appName" class="flogo-app-header__name--edit"/>
      <label class="flogo-app-header__name is-clickable"
             *ngIf="!editingName"
             (click)="onClickLabelName($event)">{{application?.name}}</label>
    </div>

    <div class="flogo-app-header__date-container">
      <label class="flogo-app-header__date--creation">{{ 'FLOWS:CREATED' | translate:{value:''} }}<span>{{application?.createdAt | timeFromNow}}.</span>
      </label>
      <label *ngIf="application && application.updatedAt" class="flogo-app-header__date--update">{{ 'FLOWS:UPDATED' |
        translate:{value:''} }}<span>{{application.updatedAt | timeFromNow}}.</span> </label>
    </div>

    <div class="flogo-app-header__description-container">
      <a *ngIf="application && !application.description && editingDescription == false" class="flogo-link"
         (click)="onClickAddDescription($event)">{{ 'DETAILS:ADD-DESCRIPTION' | translate }}</a>
      <textarea *ngIf="editingDescription" #appInputDescription
                autofocus
                (blur)="onInputDescriptionBlur($event)"
                placeholder="Description"
                rows="2"
                id="appDescription" class="flogo-app-header__description--edit"
                [(ngModel)]="application.description">
        </textarea>
      <label class="flogo-app-header__description is-clickable"
             *ngIf="!editingDescription && application?.description"
             (click)="onClickLabelDescription($event)">{{application?.description}}</label>
    </div>
  </div>
  <div class="col-xs-6 col-md-6 col-lg-5">
    <div class="flogo-app-header__options">
      <button class="flogo-button flogo-button--secondary">
        <i class="flogo-icon flogo-icon-export"></i>
        {{ 'DETAILS:EXPORT' | translate }}
      </button>
      <button class="flogo-button flogo-button--default">{{ 'DETAILS:BUILD' | translate }}</button>
      <div class="flogo-flow-detail-menu">
        <div class="flogo-flow-detail-menu-list-wrapper">
          <ul class="flogo-flow-detail-menu-list">
            <li class="flogo-flow-detail-menu-item">
              <a><i class="flogo-icon flogo-icon-delete"></i>{{'APP-DETAILS:DELETE-APP' | translate}}</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="flogo-app-content row">
  <div class="col-md-9 col-md-offset-1">
    <div class="row">
      <div class="col-sm-3">
        <span class="flogo-app-title">{{ 'DETAILS:FLOWS' | translate }}</span>
      </div>
      <div class="col-sm-4 col-sm-offset-5">
        <flogo-apps-search (changedSearch)="onChangedSearch($event)"
                           class="search"></flogo-apps-search>
      </div>
    </div>

    <div class="row">
      <div class="col-md-7 col-lg-5">
        <div class="flogo-commands">
          <flogo-flows-add></flogo-flows-add>
          <flogo-flows-import [appId]="application?.id" (importSuccess)="onFlowImportSuccess($event)"
                              (importError)="onFlowImportError($event)"></flogo-flows-import>
        </div>
      </div>
    </div>

    <div *ngIf="!flows.length">
      <hr>
      <p>{{'DETAILS:NO-FLOWS-CREATED' | translate}}</p>
    </div>


    <div class="flogo-app-content__flows">
      <flogo-apps-flows [flows]="flows" (flowSelected)="onFlowSelected($event)"></flogo-apps-flows>
    </div>

  </div>
</div>
