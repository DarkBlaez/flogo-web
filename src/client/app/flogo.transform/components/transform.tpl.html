<div class="flogo-transform-modal-wrapper" [ngClass]="{'in':active && !out}">
  <div *ngIf="active" class="flogo-transform-modal">
    <div class="flogo-transform-modal__header">
      <div class="flogo-transform-header">
        <div class="flogo-transform-header__title">
          <h2>Transformation</h2>
        </div>
        <div class="flogo-transform-header__options">
          <button class="flogo-btn-link" (click)="deleteTransform()">Delete</button>
        </div>
        <div class="flogo-transform-header__main-actions">
          <button class="tc-buttons tc-buttons-primary"
                  [class.disabled]="!isValid || !isDirty" [disabled]="!isValid || !isDirty"
                  (click)="saveTransform()">Save
          </button>
          <button class="flogo-transform-modal__close" (click)="cancel()">
            <span aria-hidden="true" class="sr-only">Close</span>
          </button>
        </div>
      </div>
    </div>
    <div class="flogo-transform-modal__content">
      <div class="col">
        <legend>Previous tiles</legend>
        <pre>{{ data.precedingTilesOutputs | json }}</pre>
      </div>
      <div class="col" [class.has-error]="!isValid">
        <legend>Mappings</legend>
        <flogo-transform-map-editor [mappings]="data.mappings"
                                    [tileInputInfo]="data.tileInputInfo"
                                    [precedingTilesOutputs]="data.precedingTilesOutputs"
                                    (mappingChange)="onMappingsChange($event)"></flogo-transform-map-editor>
        <flogo-transform-error-display *ngIf="errors" [errors]="errors"></flogo-transform-error-display>
      </div>
      <div class="col">
        <legend>Input data
          <small>{{ data.tile?.name }}</small>
        </legend>
        <pre>{{ data.tileInputInfo | json }}</pre>
      </div>
    </div>
  </div>
</div>
